# 配置常量说明

## 概述

为了方便修改和维护代码中的关键参数，我们将所有与次数、时间相关的硬编码数值提取为配置常量。这些常量定义在 `data_recorder.py` 文件的开头，方便进行统一管理和修改。

## 配置常量列表

### TID读取配置

```python
DEFAULT_TID_REQUIRED_COUNT = 5      # TID需要连续读取的次数
DEFAULT_TID_MAX_DURATION = 2        # TID读取最大持续时间(秒)
```

**说明**：
- `DEFAULT_TID_REQUIRED_COUNT`: 控制RFID读取TID时需要连续读取到相同TID的次数，确保读取稳定性
- `DEFAULT_TID_MAX_DURATION`: 限制单次TID读取操作的最大时间，避免无限等待

**影响范围**：
- 手动点击"自动获取"TID按钮
- 自动获取模式中的TID读取

### OCR识别配置

```python
DEFAULT_OCR_REQUIRED_COUNT = 5      # OCR需要连续识别的次数
DEFAULT_OCR_MAX_ATTEMPTS_MANUAL = 50    # 手动OCR识别最大尝试次数
DEFAULT_OCR_MAX_ATTEMPTS_AUTO = 20      # 自动OCR识别最大尝试次数
```

**说明**：
- `DEFAULT_OCR_REQUIRED_COUNT`: 控制OCR识别标签号时需要连续识别到相同结果的次数，确保识别准确性
- `DEFAULT_OCR_MAX_ATTEMPTS_MANUAL`: 手动OCR识别的最大尝试次数，防止识别时间过长
- `DEFAULT_OCR_MAX_ATTEMPTS_AUTO`: 自动模式下OCR识别的最大尝试次数，相对较少以提高效率

**影响范围**：
- 手动点击"自动获取"标签号按钮
- 自动获取模式中的标签号识别
- OCR识别结果显示格式 (如："识别到: XXX (第X/5次)")

### 时间间隔配置

```python
DEFAULT_OCR_SLEEP_INTERVAL = 0.1    # OCR识别间隔时间(秒)
DEFAULT_AUTO_GET_INTERVAL = 1       # 自动获取循环间隔时间(秒)
```

**说明**：
- `DEFAULT_OCR_SLEEP_INTERVAL`: OCR识别每次尝试之间的间隔时间，避免过度占用CPU
- `DEFAULT_AUTO_GET_INTERVAL`: 自动获取模式下每次完整循环的间隔时间

**影响范围**：
- OCR识别的响应速度
- 自动获取模式的运行频率
- 系统资源占用

### 其他时间配置

```python
DEFAULT_RFID_OPERATION_DELAY = 0.5  # RFID操作间隔时间(秒)
DEFAULT_CAMERA_FPS_DELAY = 0.03     # 摄像头帧率延迟(秒, 约30fps)
DEFAULT_ERROR_RETRY_DELAY = 2       # 错误重试延迟时间(秒)
DEFAULT_THREAD_STOP_WAIT = 0.5      # 线程停止等待时间(秒)
DEFAULT_CAMERA_STOP_WAIT = 0.1      # 摄像头停止等待时间(秒)
```

**说明**：
- `DEFAULT_RFID_OPERATION_DELAY`: RFID操作之间的延迟时间，确保设备响应稳定
- `DEFAULT_CAMERA_FPS_DELAY`: 摄像头帧率控制延迟，影响预览流畅度
- `DEFAULT_ERROR_RETRY_DELAY`: 发生错误时的重试延迟时间
- `DEFAULT_THREAD_STOP_WAIT`: 停止线程时的等待时间
- `DEFAULT_CAMERA_STOP_WAIT`: 停止摄像头线程时的等待时间

**影响范围**：
- RFID设备操作稳定性
- 摄像头预览流畅度
- 错误恢复时间
- 程序关闭速度

## 修改方法

### 1. 调整识别次数

如果想要修改连续识别的次数要求：

```python
# 修改前 (需要连续5次)
DEFAULT_OCR_REQUIRED_COUNT = 5

# 修改后 (需要连续3次，识别更快但可能不够稳定)
DEFAULT_OCR_REQUIRED_COUNT = 3

# 修改后 (需要连续8次，识别更稳定但速度更慢)
DEFAULT_OCR_REQUIRED_COUNT = 8
```

### 2. 调整最大尝试次数

如果想要修改识别的最大尝试次数：

```python
# 手动识别时间更长，更仔细
DEFAULT_OCR_MAX_ATTEMPTS_MANUAL = 100

# 自动识别时间更短，更高效
DEFAULT_OCR_MAX_ATTEMPTS_AUTO = 10
```

### 3. 调整时间间隔

如果想要修改识别速度：

```python
# 更快的识别速度 (可能增加CPU占用)
DEFAULT_OCR_SLEEP_INTERVAL = 0.05

# 更慢的识别速度 (减少CPU占用，但响应更慢)
DEFAULT_OCR_SLEEP_INTERVAL = 0.2
```

## 性能建议

### 推荐配置 (默认配置)

- **连续识别次数**: 5次 - 平衡了准确性和速度
- **手动最大尝试**: 50次 - 给用户足够时间调整标签位置
- **自动最大尝试**: 20次 - 避免在无标签时等待过久
- **识别间隔**: 0.1秒 - 合理的CPU占用

### 高准确性配置

```python
DEFAULT_OCR_REQUIRED_COUNT = 8
DEFAULT_OCR_MAX_ATTEMPTS_MANUAL = 100
DEFAULT_OCR_MAX_ATTEMPTS_AUTO = 30
DEFAULT_OCR_SLEEP_INTERVAL = 0.15
```

### 高速度配置

```python
DEFAULT_OCR_REQUIRED_COUNT = 3
DEFAULT_OCR_MAX_ATTEMPTS_MANUAL = 30
DEFAULT_OCR_MAX_ATTEMPTS_AUTO = 15
DEFAULT_OCR_SLEEP_INTERVAL = 0.05
```

### 低资源占用配置

```python
DEFAULT_OCR_REQUIRED_COUNT = 5
DEFAULT_OCR_MAX_ATTEMPTS_MANUAL = 30
DEFAULT_OCR_MAX_ATTEMPTS_AUTO = 10
DEFAULT_OCR_SLEEP_INTERVAL = 0.2
DEFAULT_AUTO_GET_INTERVAL = 2
```

## 注意事项

1. **修改后需要重启程序**：配置常量在程序启动时加载，修改后需要重新启动程序生效

2. **平衡准确性和速度**：增加连续识别次数会提高准确性，但会降低识别速度

3. **考虑硬件性能**：低性能设备建议适当增加时间间隔，减少CPU占用

4. **测试修改效果**：修改配置后建议进行充分测试，确保满足实际使用需求

5. **备份原始配置**：修改前建议记录原始数值，以便出现问题时恢复
